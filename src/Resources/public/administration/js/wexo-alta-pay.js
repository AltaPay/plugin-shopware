!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=(window.__sw__.assetPath + '/bundles/wexoaltapay/'),n(n.s="qaxy")}({RkbF:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(i=a.key,o=void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(o)?o:String(o)),a)}var i,o}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=Shopware.Classes.ApiService,d=Shopware.Application,l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(d,t);var e,n,c,s=o(d);function d(){return r(this,d),s.apply(this,arguments)}return e=d,(n=[{key:"getPayments",value:function(t){return this.httpClient.get("/".concat(this.getApiBasePath(),"/payments?orderId=").concat(t),{headers:this.getBasicHeaders()}).then((function(t){return u.handleResponse(t)}))}},{key:"capture",value:function(t){return this.httpClient.post("/".concat(this.getApiBasePath(),"/capture"),{orderId:t},{headers:this.getBasicHeaders()}).then((function(t){return u.handleResponse(t)}))}},{key:"refund",value:function(t){return this.httpClient.post("/".concat(this.getApiBasePath(),"/refund"),{orderId:t},{headers:this.getBasicHeaders()}).then((function(t){return u.handleResponse(t)}))}},{key:"cancel",value:function(t){return this.httpClient.post("/".concat(this.getApiBasePath(),"/cancel"),{orderId:t},{headers:this.getBasicHeaders()}).then((function(t){return u.handleResponse(t)}))}}])&&a(e.prototype,n),c&&a(e,c),Object.defineProperty(e,"prototype",{writable:!1}),d}(u);d.addServiceProvider("altaPayService",(function(t){var e=d.getContainer("init");return new l(e.httpClient,t.loginService,"altapay")}))},qaxy:function(t,e,n){"use strict";n.r(e);Shopware.Component.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_extension %}\n    <sw-tabs-item\n            v-if="!isOrderEditing && altaPayTransactionId"\n            class="sw-order-detail__tabs-tab-altaPay"\n            :route="{ name: \'sw.order.detail.altaPay\', params: { id: $route.params.id } }"\n            :title="$tc(\'altaPay.tabDetails\')"\n    >\n            {{ $tc(\'altaPay.tabDetails\') }}\n    </sw-tabs-item>\n{% endblock %}\n',computed:{altaPayTransactionId:function(){var t,e;return null===(t=this.order)||void 0===t||null===(e=t.customFields)||void 0===e?void 0:e.wexoAltaPayTransactionId}}});function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=Shopware.Component.getComponentHelper(),s=c.mapGetters,u=c.mapState,d=Shopware.State;Shopware.Component.register("sw-order-detail-altapay",{template:'<sw-card title="AltaPay Status" :isLoading="isLoading" positionIdentifier="altapay">\n    <sw-card-section v-if="transaction">\n        <sw-container columns="1fr 1fr" gap="10px">\n            <div>Transaction ID:</div>\n            <div>{{ transaction.TransactionId }}</div>\n            <div>Payment ID:</div>\n            <div>{{ transaction.PaymentId }}</div>\n            <div>Transaction Status:</div>\n            <div>{{ transaction.TransactionStatus }}</div>\n            <div>Reserved Amount:</div>\n            <div>{{ transaction.ReservedAmount }} {{ transaction.MerchantCurrencyAlpha }}</div>\n            <div>Captured Amount:</div>\n            <div>{{ transaction.CapturedAmount }} {{ transaction.MerchantCurrencyAlpha }}</div>\n            <div>Refunded Amount:</div>\n            <div>{{ transaction.RefundedAmount }} {{ transaction.MerchantCurrencyAlpha }}</div>\n            <div>3D Secure:</div>\n            <div>{{ transaction.ThreeDSecureResult }}</div>\n            <div>Created:</div>\n            <div>{{ transaction.CreatedDate }}</div>\n            <div>Last updated:</div>\n            <div>{{ transaction.UpdatedDate }}</div>\n        </sw-container>\n    </sw-card-section>\n    <sw-card-section v-if="transaction">\n        <sw-container columns="1fr 1fr 1fr" gap="10px">\n            <sw-button :disabled="isLoading || ![\'open\', \'in_progress\', \'authorized\'].includes(order.transactions[0].stateMachineState.technicalName)" @click="capture">{{ $tc("altaPay.capture") }}</sw-button>\n            <sw-button :disabled="isLoading || order.transactions[0].stateMachineState.technicalName !== \'paid\'" @click="refund">{{ $tc("altaPay.refund") }}</sw-button>\n            <sw-button :disabled="isLoading || ![\'open\', \'in_progress\', \'authorized\'].includes(order.transactions[0].stateMachineState.technicalName)" @click="cancel">{{ $tc("altaPay.cancel") }}</sw-button>\n        </sw-container>\n    </sw-card-section>\n</sw-card>\n',inject:["altaPayService"],computed:i(i({},s("swOrderDetail",["isLoading"])),u("swOrderDetail",["order","versionContext","orderAddressIds"])),metaInfo:function(){return{title:"AltaPay"}},data:function(){return{transaction:null}},methods:{createdComponent:function(){var t=this;d.commit("swOrderDetail/setLoading",["order",!0]),this.altaPayService.getPayments(this.order.id).then((function(e){t.transaction=e.Body.Transactions.Transaction})).finally((function(){d.commit("swOrderDetail/setLoading",["order",!1])}))},capture:function(){var t=this;d.commit("swOrderDetail/setLoading",["order",!0]),this.altaPayService.capture(this.order.id).then((function(e){t.transaction=e.Body.Transactions.Transaction,t.$emit("save-edits")})).finally((function(){d.commit("swOrderDetail/setLoading",["order",!1])}))},refund:function(){var t=this;d.commit("swOrderDetail/setLoading",["order",!0]),this.altaPayService.refund(this.order.id).then((function(e){t.transaction=e.Body.Transactions.Transaction,t.$emit("save-edits")})).finally((function(){d.commit("swOrderDetail/setLoading",["order",!1])}))},cancel:function(){var t=this;d.commit("swOrderDetail/setLoading",["order",!0]),this.altaPayService.cancel(this.order.id).then((function(e){t.transaction=e.Body.Transactions.Transaction,t.$emit("save-edits")})).finally((function(){d.commit("swOrderDetail/setLoading",["order",!1])}))}},created:function(){this.createdComponent()}});n("RkbF");Shopware.Module.register("wexo-altapay",{routeMiddleware:function(t,e){var n="sw.order.detail.altaPay";"sw.order.detail"===e.name&&e.children.every((function(t){return t.name!==n}))&&e.children.push({name:n,path:"/sw/order/detail/:id/altapay",component:"sw-order-detail-altapay",meta:{parentPath:"sw.order.index"}}),t(e)}}),Shopware.Locale.extend("da-DK",{altaPay:{tabDetails:"AltaPay",capture:"Hæv",refund:"Refunder",cancel:"Annuller"}}),Shopware.Locale.extend("en-GB",{altaPay:{tabDetails:"AltaPay",capture:"Capture",refund:"Refund",cancel:"Cancel"}}),Shopware.Locale.extend("de-DE",{altaPay:{tabDetails:"AltaPay",capture:"Einfangen",refund:"Rückerstattung",cancel:"Annullieren"}})}});